package com.example.sds.myapplication;import android.app.Activity;import android.content.Context;import android.graphics.Canvas;import android.graphics.Color;import android.graphics.Paint;import android.graphics.Path;import android.os.Bundle;import android.support.v7.app.AppCompatActivity;import android.util.Log;import android.view.View;import android.view.ViewGroup;import android.widget.Button;import android.widget.RelativeLayout;import android.widget.TextView;import org.json.JSONArray;import org.json.JSONException;import org.json.JSONObject;public class MapMainActivity extends AppCompatActivity {    TextView tv;    MapMainActivity cnxt;    JSONObject jsonObject;    JSONArray jsonArray;    protected void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);//        setContentView(R.layout.activity_robot_main);        //drable        setPointMap();        ViewEx viewEx = new ViewEx(this);        setContentView(viewEx);    }    public void setPointMap(){        jsonObject = new JSONObject();        jsonArray = new JSONArray();        Log.d("mapJson","start");        String point = "{\"point\":[100,200,300,400,500]}";            try {//            jsonObject.put("seq", new int[]{1, 2, 3, 4, 5, 6, 7, 8, 9, 10});//            jsonObject.put("X", new int[]{10, 100, 80, 40, 50, 60, 70, 120, 90, 15});//            jsonObject.put("Y", new int[]{10, 20, 30, 40, 20, 60, 70, 50, 90, 10});//                jsonObject.put("seq", 1);//                jsonObject.put("X", i * 10);//                jsonObject.put("Y", (i+1) * 10);                jsonObject = new JSONObject(point);                jsonArray = jsonObject.getJSONArray("point");            } catch (JSONException e) {                e.printStackTrace();            }//            jsonArray.put(jsonObject);        Log.d("mapJson",jsonObject.toString());    }    protected class ViewEx extends View    {        public ViewEx(Context context)        {            super(context);//            cnxt = (MapMainActivity)cnxt;        }        public void onDraw(Canvas canvas) {            canvas.drawColor(Color.BLACK);            Paint MyPaint = new Paint();            MyPaint.setStrokeWidth(5f);            MyPaint.setStyle(Paint.Style.FILL);            MyPaint.setColor(Color.GRAY);            canvas.drawLine(0, 0, 360, 640, MyPaint);            Path path = new Path();//            path.moveTo(100, 100);//            path.lineTo(100, 100);//            path.lineTo(100, 200);//            path.lineTo(200, 100);//            path.lineTo(200, 200);//            path.lineTo(300, 100);//            canvas.drawPath(path, MyPaint);            path = new Path();            int now_x;            int now_y;            JSONObject getJsonObject = new JSONObject();            for(int i=0; i<jsonArray.length(); i++){                try {                    Log.d("printJsonObject", String.valueOf(i));//                    getJsonObject = jsonArray.getJSONObject(i);//                    now_x = getJsonObject.getInt("X");//                    now_y = getJsonObject.getInt("Y");                    now_x = jsonArray.getInt(i);                    now_y = now_x + jsonArray.getInt(i);                    Log.d("printJsonObject", now_x +" / "+now_y);                    if(i == 0){                        path.moveTo(now_x,now_y);                    }else{                        path.lineTo(now_x,now_y);                    }                } catch (JSONException e) {                    e.printStackTrace();                }            }            canvas.drawPath(path, MyPaint);//            tv = new TextView(cnxt);//            tv.setTextColor(Color.parseColor("#FFFFFF"));//            tv.setText("안녕 여기는 ITPANGPANG!");////            RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(//                    ViewGroup.LayoutParams.WRAP_CONTENT,//                    ViewGroup.LayoutParams.WRAP_CONTENT);//            tv.setLayoutParams(lp);//            ((RelativeLayout) this.getParent()).addView(tv);        }    }}
